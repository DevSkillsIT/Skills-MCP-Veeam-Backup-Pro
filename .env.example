# Veeam VBR Server Configuration - Skills IT
# IMPORTANTE: Copie este arquivo para .env e configure com suas credenciais reais
# .env NÃO deve ser commitado (está no .gitignore)

# ============================================================================
# Veeam Server Details
# ============================================================================
VEEAM_HOST=veeam-server.domain.com
VEEAM_PORT=9398
VEEAM_API_VERSION=1.2-rev1

# ============================================================================
# Authentication Credentials
# ============================================================================
# Formato: DOMAIN\username ou username@domain.com
VEEAM_USERNAME=AD\administrator
VEEAM_PASSWORD=your-secure-password-here

# ============================================================================
# SSL Configuration
# ============================================================================
# IMPORTANTE: Lógica invertida no código original!
# Para IGNORAR SSL (aceitar self-signed), usar false (sim, é contraintuitivo)
# rejectUnauthorized: process.env.VEEAM_IGNORE_SSL === 'true'
# Quando VEEAM_IGNORE_SSL=false -> rejectUnauthorized=false -> ACEITA self-signed
VEEAM_IGNORE_SSL=false

# ============================================================================
# Server Configuration
# ============================================================================
HTTP_PORT=8825
NODE_ENV=production

# ============================================================================
# MCP Server Name
# ============================================================================
MCP_SERVER_NAME=Skills-MCP-Veeam-Backup-Pro

# ============================================================================
# MCP HTTP Authentication (Bearer Token)
# ============================================================================
# Token para autenticar requisições HTTP ao endpoint /mcp
# Gerar com: openssl rand -hex 32
AUTH_TOKEN=your-bearer-token-here-generate-with-openssl-rand-hex-32

# ============================================================================
# SAFETY GUARD - Proteção para operações críticas
# ============================================================================
# Habilita verificação de confirmação para operações destrutivas/críticas
# Quando true, as tools start-backup-job e stop-backup-job exigem:
# - confirmationToken: Token de segurança (deve ser igual ao MCP_SAFETY_TOKEN)
# - reason: Justificativa detalhada (mínimo 10 caracteres)
#
# Quando false, as tools funcionam normalmente sem exigir confirmação
MCP_SAFETY_GUARD=false

# Token de segurança para autorizar operações críticas
# IMPORTANTE: Deve ter pelo menos 8 caracteres (recomendado: 16+)
# Este token deve ser passado como confirmationToken nas tools protegidas
#
# Gerar token seguro com:
# openssl rand -hex 32  (64 caracteres hexadecimais)
# openssl rand -base64 24  (32 caracteres base64)
# node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#
# Operações protegidas:
# - start-backup-job: Iniciar backup job sob demanda (fora do schedule)
# - stop-backup-job: Interromper backup job em execução
MCP_SAFETY_TOKEN=your-safety-token-here-min-8-chars

# ============================================================================
# URLs de Referência (documentação)
# ============================================================================
# Enterprise Manager: https://veeam-server:9443
# REST API: https://veeam-server:9398/api
# Documentação API: https://helpcenter.veeam.com/docs/backup/rest/
